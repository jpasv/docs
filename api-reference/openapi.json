{"openapi":"3.0.0","paths":{"/":{"get":{"operationId":"AppController_getHello","parameters":[],"responses":{"200":{"description":""}},"tags":["App"]}},"/health":{"get":{"operationId":"HealthController_check","parameters":[],"responses":{"200":{"description":"The Health Check is successful","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","example":"ok"},"info":{"type":"object","example":{"database":{"status":"up"}},"additionalProperties":{"type":"object","required":["status"],"properties":{"status":{"type":"string"}},"additionalProperties":true},"nullable":true},"error":{"type":"object","example":{},"additionalProperties":{"type":"object","required":["status"],"properties":{"status":{"type":"string"}},"additionalProperties":true},"nullable":true},"details":{"type":"object","example":{"database":{"status":"up"}},"additionalProperties":{"type":"object","required":["status"],"properties":{"status":{"type":"string"}},"additionalProperties":true}}}}}}},"503":{"description":"The Health Check is not successful","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","example":"error"},"info":{"type":"object","example":{"database":{"status":"up"}},"additionalProperties":{"type":"object","required":["status"],"properties":{"status":{"type":"string"}},"additionalProperties":true},"nullable":true},"error":{"type":"object","example":{"redis":{"status":"down","message":"Could not connect"}},"additionalProperties":{"type":"object","required":["status"],"properties":{"status":{"type":"string"}},"additionalProperties":true},"nullable":true},"details":{"type":"object","example":{"database":{"status":"up"},"redis":{"status":"down","message":"Could not connect"}},"additionalProperties":{"type":"object","required":["status"],"properties":{"status":{"type":"string"}},"additionalProperties":true}}}}}}}},"tags":["Health"]}},"/health/ready":{"get":{"operationId":"HealthController_ready","parameters":[],"responses":{"200":{"description":"The Health Check is successful","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","example":"ok"},"info":{"type":"object","example":{"database":{"status":"up"}},"additionalProperties":{"type":"object","required":["status"],"properties":{"status":{"type":"string"}},"additionalProperties":true},"nullable":true},"error":{"type":"object","example":{},"additionalProperties":{"type":"object","required":["status"],"properties":{"status":{"type":"string"}},"additionalProperties":true},"nullable":true},"details":{"type":"object","example":{"database":{"status":"up"}},"additionalProperties":{"type":"object","required":["status"],"properties":{"status":{"type":"string"}},"additionalProperties":true}}}}}}},"503":{"description":"The Health Check is not successful","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","example":"error"},"info":{"type":"object","example":{"database":{"status":"up"}},"additionalProperties":{"type":"object","required":["status"],"properties":{"status":{"type":"string"}},"additionalProperties":true},"nullable":true},"error":{"type":"object","example":{"redis":{"status":"down","message":"Could not connect"}},"additionalProperties":{"type":"object","required":["status"],"properties":{"status":{"type":"string"}},"additionalProperties":true},"nullable":true},"details":{"type":"object","example":{"database":{"status":"up"},"redis":{"status":"down","message":"Could not connect"}},"additionalProperties":{"type":"object","required":["status"],"properties":{"status":{"type":"string"}},"additionalProperties":true}}}}}}}},"tags":["Health"]}},"/health/live":{"get":{"operationId":"HealthController_live","parameters":[],"responses":{"200":{"description":"The Health Check is successful","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","example":"ok"},"info":{"type":"object","example":{"database":{"status":"up"}},"additionalProperties":{"type":"object","required":["status"],"properties":{"status":{"type":"string"}},"additionalProperties":true},"nullable":true},"error":{"type":"object","example":{},"additionalProperties":{"type":"object","required":["status"],"properties":{"status":{"type":"string"}},"additionalProperties":true},"nullable":true},"details":{"type":"object","example":{"database":{"status":"up"}},"additionalProperties":{"type":"object","required":["status"],"properties":{"status":{"type":"string"}},"additionalProperties":true}}}}}}},"503":{"description":"The Health Check is not successful","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","example":"error"},"info":{"type":"object","example":{"database":{"status":"up"}},"additionalProperties":{"type":"object","required":["status"],"properties":{"status":{"type":"string"}},"additionalProperties":true},"nullable":true},"error":{"type":"object","example":{"redis":{"status":"down","message":"Could not connect"}},"additionalProperties":{"type":"object","required":["status"],"properties":{"status":{"type":"string"}},"additionalProperties":true},"nullable":true},"details":{"type":"object","example":{"database":{"status":"up"},"redis":{"status":"down","message":"Could not connect"}},"additionalProperties":{"type":"object","required":["status"],"properties":{"status":{"type":"string"}},"additionalProperties":true}}}}}}}},"tags":["Health"]}},"/api/emails/send":{"post":{"operationId":"EmailController_sendEmail","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SendEmailDto"}}}},"responses":{"200":{"description":"Email sent successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EmailResponseDto"}}}},"400":{"description":"Bad Request"},"500":{"description":"Internal Server Error"}},"security":[{"bearer":[]}],"summary":"Send a single email","tags":["Emails"]}},"/api/emails/send-batch":{"post":{"operationId":"EmailController_sendBatchEmails","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SendBatchEmailDto"}}}},"responses":{"200":{"description":"Batch emails sent successfully","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/EmailResponseDto"}}}}},"400":{"description":"Bad Request"},"500":{"description":"Internal Server Error"}},"security":[{"bearer":[]}],"summary":"Send multiple emails in batch","tags":["Emails"]}},"/api/emails/send-to-segment":{"post":{"operationId":"EmailController_sendEmailToSegment","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SendEmailToSegmentDto"}}}},"responses":{"200":{"description":"Emails sent successfully to segment","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/EmailResponseDto"}}}}},"400":{"description":"Bad Request"},"500":{"description":"Internal Server Error"}},"security":[{"bearer":[]}],"summary":"Send email to all contacts in a segment","tags":["Emails"]}},"/api/emails/config/status":{"get":{"operationId":"EmailController_getConfigStatus","parameters":[],"responses":{"200":{"description":"Configuration status"}},"security":[{"bearer":[]}],"summary":"Debug: Check Resend configuration status","tags":["Emails"]}},"/api/emails":{"get":{"operationId":"EmailController_getEmails","parameters":[{"name":"page","required":false,"in":"query","description":"Page number","schema":{"minimum":1,"default":1,"type":"number"}},{"name":"limit","required":false,"in":"query","description":"Number of items per page","schema":{"minimum":1,"maximum":100,"default":20,"type":"number"}},{"name":"to","required":false,"in":"query","description":"Filter by recipient email","schema":{"type":"string"}},{"name":"from","required":false,"in":"query","description":"Filter by sender email","schema":{"type":"string"}},{"name":"status","required":false,"in":"query","description":"Filter by email status","schema":{"type":"string","enum":["pending","sent","delivered","failed","bounced","complained"]}},{"name":"search","required":false,"in":"query","description":"Search in subject","schema":{"type":"string"}},{"name":"tags","required":false,"in":"query","description":"Filter by tags","schema":{"type":"array","items":{"type":"string"}}},{"name":"sortBy","required":false,"in":"query","description":"Sort by field","schema":{"default":"createdAt","type":"string","enum":["createdAt","updatedAt","subject","status"]}},{"name":"order","required":false,"in":"query","description":"Sort order","schema":{"default":"desc","type":"string","enum":["asc","desc"]}},{"name":"dateFrom","required":false,"in":"query","description":"Filter by date from (ISO 8601)","schema":{"type":"string"}},{"name":"dateTo","required":false,"in":"query","description":"Filter by date to (ISO 8601)","schema":{"type":"string"}}],"responses":{"200":{"description":"List of sent emails","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/EmailResponseDto"}}}}}},"security":[{"bearer":[]}],"summary":"Get email history","tags":["Emails"]}},"/api/emails/{id}/metrics":{"get":{"operationId":"EmailController_getBroadcastMetrics","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Broadcast metrics"},"404":{"description":"Broadcast not found"}},"security":[{"bearer":[]}],"summary":"Get broadcast metrics (sent, delivered, opened, clicked)","tags":["Emails"]}},"/api/emails/{id}/status":{"get":{"operationId":"EmailController_getEmailStatus","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Email delivery status"},"404":{"description":"Email not found"}},"security":[{"bearer":[]}],"summary":"Get email delivery status","tags":["Emails"]}},"/api/emails/{id}":{"get":{"operationId":"EmailController_getEmailById","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Email details","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EmailResponseDto"}}}},"404":{"description":"Email not found"}},"security":[{"bearer":[]}],"summary":"Get email by ID","tags":["Emails"]}},"/api/contacts/upload":{"post":{"operationId":"ContactsController_uploadCsv","parameters":[],"responses":{"200":{"description":"CSV processing summary","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UploadContactsResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Upload contacts list from CSV file with field mapping","tags":["Contacts"]}},"/api/contacts/import-progress/{progressId}":{"get":{"operationId":"ContactsController_getImportProgress","parameters":[{"name":"progressId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Obtém progresso atual de uma importação CSV","tags":["Contacts"]}},"/api/contacts/ids":{"get":{"operationId":"ContactsController_getAllContactIds","parameters":[{"name":"search","required":true,"in":"query","schema":{"type":"string"}},{"name":"tags","required":true,"in":"query","schema":{"type":"string"}},{"name":"segmentId","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"Array of contact IDs","content":{"application/json":{"schema":{"type":"array","items":{"type":"string"}}}}}},"security":[{"bearer":[]}],"summary":"Get all contact IDs (respecting filters)","tags":["Contacts"]}},"/api/contacts":{"post":{"operationId":"ContactsController_createContact","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateContactDto"}}}},"responses":{"201":{"description":"Contact created successfully"},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"}},"security":[{"bearer":[]}],"summary":"Create a new contact manually","tags":["Contacts"]},"get":{"operationId":"ContactsController_listContacts","parameters":[{"name":"search","required":true,"in":"query","schema":{"type":"string"}},{"name":"page","required":true,"in":"query","schema":{"type":"string"}},{"name":"limit","required":true,"in":"query","schema":{"type":"string"}},{"name":"tags","required":true,"in":"query","schema":{"type":"string"}},{"name":"tagsOperator","required":true,"in":"query","schema":{"type":"string"}},{"name":"excludeTags","required":true,"in":"query","schema":{"type":"string"}},{"name":"segmentId","required":true,"in":"query","schema":{"type":"string"}},{"name":"includeSegmentIds","required":true,"in":"query","schema":{"type":"string"}},{"name":"includeOperator","required":true,"in":"query","schema":{"type":"string"}},{"name":"segmentPresence","required":true,"in":"query","schema":{"type":"string"}},{"name":"excludeSegmentIds","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"List of contacts"}},"security":[{"bearer":[]}],"summary":"List contacts with pagination and search","tags":["Contacts"]}},"/api/contacts/tags":{"get":{"operationId":"ContactsController_listTags","parameters":[],"responses":{"200":{"description":"Array of unique tags"}},"security":[{"bearer":[]}],"summary":"List distinct contact tags","tags":["Contacts"]},"post":{"operationId":"ContactsController_createTag","parameters":[],"responses":{"201":{"description":"Tag created successfully"}},"security":[{"bearer":[]}],"summary":"Create a new tag","tags":["Contacts"]}},"/api/contacts/preview-csv":{"post":{"operationId":"ContactsController_previewCsv","parameters":[],"responses":{"200":{"description":"CSV preview with columns and sample data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CsvPreviewResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Preview CSV file and get column names","tags":["Contacts"]}},"/api/contacts/bulk-delete":{"post":{"operationId":"ContactsController_bulkDelete","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BulkDeleteContactsDto"}}}},"responses":{"200":{"description":"Bulk delete result","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BulkDeleteContactsResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Delete multiple contacts by IDs","tags":["Contacts"]}},"/api/contacts/bulk-add-tags":{"post":{"operationId":"ContactsController_bulkAddTags","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BulkAddTagsDto"}}}},"responses":{"200":{"description":"Bulk add tags result","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BulkAddTagsResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Add tags to multiple contacts","tags":["Contacts"]}},"/api/contacts/{id}":{"get":{"operationId":"ContactsController_getContactById","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Contact details"}},"security":[{"bearer":[]}],"summary":"Get contact by ID","tags":["Contacts"]},"patch":{"operationId":"ContactsController_updateContact","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Contact updated successfully"}},"security":[{"bearer":[]}],"summary":"Update contact by ID","tags":["Contacts"]},"delete":{"operationId":"ContactsController_deleteContact","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Contact deleted successfully"}},"security":[{"bearer":[]}],"summary":"Delete contact by ID","tags":["Contacts"]}},"/auth/login":{"post":{"description":"Autentica um usuário com email e senha, retornando access token e refresh token","operationId":"AuthenticationController_login","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginCredentialsDto"}}}},"responses":{"200":{"description":"Login realizado com sucesso","content":{"application/json":{"schema":{"example":{"success":true,"data":{"accessToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...","refreshToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...","user":{"id":"123e4567-e89b-12d3-a456-426614174000","email":"user@example.com","name":"João Silva"}},"message":"Login realizado com sucesso"}}}}},"401":{"description":"Credenciais inválidas","content":{"application/json":{"schema":{"example":{"statusCode":401,"message":"Email ou senha incorretos"}}}}},"429":{"description":"Muitas tentativas de login (rate limit)"}},"summary":"Login de usuário","tags":["Authentication"]}},"/auth/register":{"post":{"description":"Cria uma nova conta de usuário e retorna tokens de autenticação","operationId":"AuthenticationController_register","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterUserDto"}}}},"responses":{"201":{"description":"Usuário criado com sucesso","content":{"application/json":{"schema":{"example":{"success":true,"data":{"accessToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...","refreshToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...","user":{"id":"123e4567-e89b-12d3-a456-426614174000","email":"newuser@example.com","name":"Maria Santos"}},"message":"Cadastro realizado com sucesso"}}}}},"400":{"description":"Dados inválidos ou email já cadastrado"},"429":{"description":"Muitas tentativas de registro (rate limit)"}},"summary":"Registro de novo usuário","tags":["Authentication"]}},"/auth/refresh":{"post":{"description":"Gera um novo access token usando um refresh token válido","operationId":"AuthenticationController_refreshToken","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefreshTokenDto"}}}},"responses":{"200":{"description":"Token renovado com sucesso","content":{"application/json":{"schema":{"example":{"success":true,"data":{"accessToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."},"message":"Token renovado com sucesso"}}}}},"401":{"description":"Refresh token inválido ou expirado"}},"summary":"Renovar access token","tags":["Authentication"]}},"/auth/me":{"get":{"description":"Retorna os dados do usuário autenticado","operationId":"AuthenticationController_getCurrentUser","parameters":[],"responses":{"200":{"description":"Dados do usuário","content":{"application/json":{"schema":{"example":{"success":true,"data":{"user":{"id":"123e4567-e89b-12d3-a456-426614174000","email":"user@example.com","name":"João Silva"}}}}}}},"401":{"description":"Não autenticado"}},"security":[{"bearer":[]}],"summary":"Obter usuário atual","tags":["Authentication"]}},"/auth/logout":{"post":{"description":"Invalida o token atual, impedindo seu uso futuro","operationId":"AuthenticationController_logout","parameters":[],"responses":{"200":{"description":"Logout realizado com sucesso"},"401":{"description":"Não autenticado"}},"security":[{"bearer":[]}],"summary":"Logout do usuário","tags":["Authentication"]}},"/auth/change-password":{"post":{"description":"Permite ao usuário autenticado alterar sua senha","operationId":"AuthenticationController_changePassword","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChangePasswordDto"}}}},"responses":{"200":{"description":"Senha alterada com sucesso"},"400":{"description":"Senha atual incorreta ou nova senha inválida"},"401":{"description":"Não autenticado"}},"security":[{"bearer":[]}],"summary":"Alterar senha","tags":["Authentication"]}},"/auth/sessions":{"get":{"description":"Retorna todas as sessões ativas do usuário com informações de device","operationId":"AuthenticationController_getSessions","parameters":[],"responses":{"200":{"description":"Lista de sessões ativas","content":{"application/json":{"schema":{"example":{"success":true,"data":{"sessions":[{"id":"123e4567-e89b-12d3-a456-426614174000","device_fingerprint":"abc123...","ip_address":"192.168.1.1","user_agent":"Mozilla/5.0...","last_used_at":"2025-11-18T10:00:00Z","created_at":"2025-11-18T08:00:00Z"}]}}}}}}},"security":[{"bearer":[]}],"summary":"Listar sessões ativas","tags":["Authentication"]},"delete":{"description":"Revoga todas as sessões ativas do usuário (útil para segurança)","operationId":"AuthenticationController_revokeAllSessions","parameters":[],"responses":{"200":{"description":"Todas as sessões foram revogadas"}},"security":[{"bearer":[]}],"summary":"Revogar todas as sessões","tags":["Authentication"]}},"/auth/sessions/{sessionId}":{"delete":{"description":"Revoga (desloga) uma sessão específica do usuário","operationId":"AuthenticationController_revokeSession","parameters":[{"name":"sessionId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Sessão revogada com sucesso"}},"security":[{"bearer":[]}],"summary":"Revogar sessão específica","tags":["Authentication"]}},"/auth/validate-token":{"post":{"description":"Verifica se um token JWT é válido e não expirou","operationId":"AuthenticationController_validateToken","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefreshTokenDto"}}}},"responses":{"200":{"description":"Resultado da validação","content":{"application/json":{"schema":{"example":{"success":true,"data":{"valid":true,"user_id":"123e4567-e89b-12d3-a456-426614174000","expires_at":1700000000}}}}}}},"summary":"Validar token","tags":["Authentication"]}},"/api/tenant/settings":{"get":{"operationId":"TenantController_getSettings","parameters":[],"responses":{"200":{"description":"Tenant settings retrieved successfully"}},"security":[{"bearer":[]}],"summary":"Get tenant settings and limits","tags":["Tenant"]},"patch":{"operationId":"TenantController_updateSettings","parameters":[],"responses":{"200":{"description":"Tenant settings updated successfully"}},"security":[{"bearer":[]}],"summary":"Update tenant settings","tags":["Tenant"]}},"/api/tenant/usage":{"get":{"operationId":"TenantController_getUsage","parameters":[],"responses":{"200":{"description":"Tenant usage retrieved successfully"}},"security":[{"bearer":[]}],"summary":"Get current tenant usage","tags":["Tenant"]}},"/api/tenant/limits":{"get":{"operationId":"TenantController_getLimits","parameters":[],"responses":{"200":{"description":"Tenant limits retrieved successfully"}},"security":[{"bearer":[]}],"summary":"Get tenant plan limits","tags":["Tenant"]}},"/api/segments":{"post":{"operationId":"SegmentsController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateSegmentDto"}}}},"responses":{"201":{"description":"Segment created successfully"}},"security":[{"bearer":[]}],"summary":"Create new segment","tags":["Segments"]},"get":{"operationId":"SegmentsController_findAll","parameters":[{"name":"search","required":false,"in":"query","schema":{"type":"string"}},{"name":"page","required":false,"in":"query","schema":{"type":"string"}},{"name":"limit","required":false,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"List of segments"}},"security":[{"bearer":[]}],"summary":"List segments","tags":["Segments"]}},"/api/segments/{id}":{"get":{"operationId":"SegmentsController_findById","parameters":[{"name":"id","required":true,"in":"path","description":"Segment ID","schema":{"type":"string"}}],"responses":{"200":{"description":"Segment details"}},"security":[{"bearer":[]}],"summary":"Get segment by ID","tags":["Segments"]},"put":{"operationId":"SegmentsController_update","parameters":[{"name":"id","required":true,"in":"path","description":"Segment ID","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateSegmentDto"}}}},"responses":{"200":{"description":"Segment updated successfully"}},"security":[{"bearer":[]}],"summary":"Update segment","tags":["Segments"]},"delete":{"operationId":"SegmentsController_delete","parameters":[{"name":"id","required":true,"in":"path","description":"Segment ID","schema":{"type":"string"}}],"responses":{"204":{"description":"Segment deleted successfully"}},"security":[{"bearer":[]}],"summary":"Delete segment","tags":["Segments"]}},"/api/segments/{id}/contacts":{"post":{"operationId":"SegmentsController_addContacts","parameters":[{"name":"id","required":true,"in":"path","description":"Segment ID","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddContactsToSegmentDto"}}}},"responses":{"200":{"description":"Contacts added successfully"}},"security":[{"bearer":[]}],"summary":"Add contacts to segment","tags":["Segments"]},"get":{"operationId":"SegmentsController_getContacts","parameters":[{"name":"id","required":true,"in":"path","description":"Segment ID","schema":{"type":"string"}}],"responses":{"200":{"description":"List of contact IDs in the segment"}},"security":[{"bearer":[]}],"summary":"List contacts in segment","tags":["Segments"]}},"/api/segments/{id}/contacts/remove":{"post":{"operationId":"SegmentsController_removeContacts","parameters":[{"name":"id","required":true,"in":"path","description":"Segment ID","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddContactsToSegmentDto"}}}},"responses":{"200":{"description":"Contacts removed successfully"}},"security":[{"bearer":[]}],"summary":"Remove contacts from segment","tags":["Segments"]}},"/api/segments/{id}/recalculate":{"post":{"operationId":"SegmentsController_recalculate","parameters":[{"name":"id","required":true,"in":"path","description":"Segment ID","schema":{"type":"string"}}],"responses":{"200":{"description":"Contact count recalculated"}},"security":[{"bearer":[]}],"summary":"Recalculate segment contacts based on rules","tags":["Segments"]}},"/api/automations":{"post":{"operationId":"AutomationsController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateAutomationDto"}}}},"responses":{"201":{"description":"Automation created successfully"}},"security":[{"bearer":[]}],"summary":"Create new automation","tags":["Automations"]},"get":{"operationId":"AutomationsController_findAll","parameters":[{"name":"user_id","required":false,"in":"query","description":"Filter by user ID","schema":{"type":"string"}},{"name":"status","required":false,"in":"query","schema":{"type":"string"}},{"name":"page","required":false,"in":"query","schema":{"type":"string"}},{"name":"limit","required":false,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"List of automations"}},"security":[{"bearer":[]}],"summary":"List automations","tags":["Automations"]}},"/api/automations/{id}":{"get":{"operationId":"AutomationsController_findById","parameters":[{"name":"id","required":true,"in":"path","description":"Automation ID","schema":{"type":"string"}}],"responses":{"200":{"description":"Automation details"}},"security":[{"bearer":[]}],"summary":"Get automation by ID","tags":["Automations"]},"put":{"operationId":"AutomationsController_update","parameters":[{"name":"id","required":true,"in":"path","description":"Automation ID","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateAutomationDto"}}}},"responses":{"200":{"description":"Automation updated successfully"}},"security":[{"bearer":[]}],"summary":"Update automation (full replace)","tags":["Automations"]},"patch":{"operationId":"AutomationsController_partialUpdate","parameters":[{"name":"id","required":true,"in":"path","description":"Automation ID","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateAutomationDto"}}}},"responses":{"200":{"description":"Automation updated successfully"}},"security":[{"bearer":[]}],"summary":"Update automation (partial)","tags":["Automations"]},"delete":{"operationId":"AutomationsController_delete","parameters":[{"name":"id","required":true,"in":"path","description":"Automation ID","schema":{"type":"string"}}],"responses":{"204":{"description":"Automation deleted successfully"}},"security":[{"bearer":[]}],"summary":"Delete automation","tags":["Automations"]}},"/api/automations/{id}/activate":{"post":{"operationId":"AutomationsController_activate","parameters":[{"name":"id","required":true,"in":"path","description":"Automation ID","schema":{"type":"string"}}],"responses":{"200":{"description":"Automation activated successfully"}},"security":[{"bearer":[]}],"summary":"Activate automation","tags":["Automations"]}},"/api/automations/{id}/pause":{"post":{"operationId":"AutomationsController_pause","parameters":[{"name":"id","required":true,"in":"path","description":"Automation ID","schema":{"type":"string"}}],"responses":{"200":{"description":"Automation paused successfully"}},"security":[{"bearer":[]}],"summary":"Pause automation","tags":["Automations"]}},"/api/automations/{id}/archive":{"post":{"operationId":"AutomationsController_archive","parameters":[{"name":"id","required":true,"in":"path","description":"Automation ID","schema":{"type":"string"}}],"responses":{"200":{"description":"Automation archived successfully"}},"security":[{"bearer":[]}],"summary":"Archive automation","tags":["Automations"]}},"/api/automations/executions/all":{"get":{"operationId":"AutomationsController_getAllExecutions","parameters":[{"name":"user_id","required":false,"in":"query","description":"Filter by user ID","schema":{"type":"string"}},{"name":"automation_id","required":false,"in":"query","description":"Filter by automation ID","schema":{"type":"string"}},{"name":"contact_id","required":false,"in":"query","description":"Filter by contact ID","schema":{"type":"string"}},{"name":"status","required":false,"in":"query","description":"Filter by status","schema":{"type":"string"}},{"name":"start_date","required":false,"in":"query","description":"Filter by start date (ISO format)","schema":{"type":"string"}},{"name":"end_date","required":false,"in":"query","description":"Filter by end date (ISO format)","schema":{"type":"string"}},{"name":"page","required":false,"in":"query","schema":{"type":"string"}},{"name":"limit","required":false,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"List of all executions"}},"security":[{"bearer":[]}],"summary":"List all automation executions with filters","tags":["Automations"]}},"/api/automations/{id}/executions":{"get":{"operationId":"AutomationsController_getExecutions","parameters":[{"name":"id","required":true,"in":"path","description":"Automation ID","schema":{"type":"string"}}],"responses":{"200":{"description":"List of executions"}},"security":[{"bearer":[]}],"summary":"List automation executions","tags":["Automations"]}},"/api/automations/{id}/contacts-count-by-node":{"get":{"operationId":"AutomationsController_getContactsCountByNode","parameters":[{"name":"id","required":true,"in":"path","description":"Automation ID","schema":{"type":"string"}}],"responses":{"200":{"description":"Contacts count by node (key: node_id, value: count)"}},"security":[{"bearer":[]}],"summary":"Get contacts count by node in automation","tags":["Automations"]}},"/api/automations/executions/{executionId}":{"delete":{"operationId":"AutomationsController_cancelExecution","parameters":[{"name":"executionId","required":true,"in":"path","description":"Execution ID","schema":{"type":"string"}}],"responses":{"204":{"description":"Execution cancelled successfully"}},"security":[{"bearer":[]}],"summary":"Cancel/Delete an execution","tags":["Automations"]}},"/api/automations/{id}/trigger":{"post":{"operationId":"AutomationsController_triggerAutomation","parameters":[{"name":"id","required":true,"in":"path","description":"Automation ID","schema":{"type":"string"}}],"responses":{"201":{"description":"Bulk action created and automation triggered for contacts"}},"security":[{"bearer":[]}],"summary":"Trigger automation manually for specific contacts (creates bulk action)","tags":["Automations"]}},"/api/automations/{id}/nodes/{nodeId}/contacts":{"get":{"operationId":"AutomationsController_getContactsByNode","parameters":[{"name":"id","required":true,"in":"path","description":"Automation ID","schema":{"type":"string"}},{"name":"nodeId","required":true,"in":"path","description":"Node ID","schema":{"type":"string"}}],"responses":{"200":{"description":"List of contacts currently in this node"}},"security":[{"bearer":[]}],"summary":"Get contacts in a specific node of automation","tags":["Automations"]}},"/api/automations/{id}/nodes/{nodeId}/forward":{"post":{"description":"Moves all contacts currently in the specified node to the next node without waiting for the current action to complete","operationId":"AutomationsController_forwardContactsToNextNode","parameters":[{"name":"id","required":true,"in":"path","description":"Automation ID","schema":{"type":"string"}},{"name":"nodeId","required":true,"in":"path","description":"Node ID to forward contacts from","schema":{"type":"string"}}],"responses":{"200":{"description":"Contacts forwarded successfully"}},"security":[{"bearer":[]}],"summary":"Forward contacts from a node to the next node","tags":["Automations"]}},"/api/automations/events":{"post":{"operationId":"AutomationsController_createEvent","parameters":[],"responses":{"201":{"description":"Event created and automations triggered"}},"security":[{"bearer":[]}],"summary":"Create event (to trigger automations)","tags":["Automations"]}},"/api/automations/executions/{executionId}/soft":{"delete":{"operationId":"AutomationsController_softDeleteExecution","parameters":[{"name":"executionId","required":true,"in":"path","description":"Execution ID","schema":{"type":"string"}}],"responses":{"204":{"description":"Execution soft deleted successfully"}},"security":[{"bearer":[]}],"summary":"Soft delete an execution (can be restored)","tags":["Automations"]}},"/api/automations/executions/{executionId}/restore":{"post":{"operationId":"AutomationsController_restoreExecution","parameters":[{"name":"executionId","required":true,"in":"path","description":"Execution ID","schema":{"type":"string"}}],"responses":{"200":{"description":"Execution restored successfully"}},"security":[{"bearer":[]}],"summary":"Restore a soft deleted execution","tags":["Automations"]}},"/api/automations/executions/{executionId}/pause":{"post":{"operationId":"AutomationsController_pauseExecution","parameters":[{"name":"executionId","required":true,"in":"path","description":"Execution ID","schema":{"type":"string"}}],"responses":{"200":{"description":"Execution paused successfully"}},"security":[{"bearer":[]}],"summary":"Pause a running execution","tags":["Automations"]}},"/api/automations/executions/{executionId}/resume":{"post":{"operationId":"AutomationsController_resumeExecution","parameters":[{"name":"executionId","required":true,"in":"path","description":"Execution ID","schema":{"type":"string"}}],"responses":{"200":{"description":"Execution resumed successfully"}},"security":[{"bearer":[]}],"summary":"Resume a paused execution","tags":["Automations"]}},"/api/automations/executions/{executionId}/reprocess":{"post":{"operationId":"AutomationsController_reprocessExecution","parameters":[{"name":"executionId","required":true,"in":"path","description":"Execution ID to reprocess","schema":{"type":"string"}}],"responses":{"201":{"description":"New execution created successfully"}},"security":[{"bearer":[]}],"summary":"Reprocess an execution (create new execution from start)","tags":["Automations"]}},"/api/health/automations":{"get":{"operationId":"AutomationsHealthController_getHealthCheck","parameters":[],"responses":{"200":{"description":""}},"tags":["AutomationsHealth"]}},"/api/health/automations/cache/refresh":{"post":{"operationId":"AutomationsHealthController_refreshCache","parameters":[],"responses":{"201":{"description":""}},"tags":["AutomationsHealth"]}},"/api/health/automations/queues/clean":{"post":{"operationId":"AutomationsHealthController_cleanOrphanedJobs","parameters":[],"responses":{"201":{"description":""}},"tags":["AutomationsHealth"]}},"/bulk-actions":{"post":{"operationId":"BulkActionsController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateBulkActionDto"}}}},"responses":{"201":{"description":""}},"tags":["BulkActions"]},"get":{"operationId":"BulkActionsController_findAll","parameters":[],"responses":{"200":{"description":""}},"tags":["BulkActions"]}},"/bulk-actions/{id}/stream":{"get":{"operationId":"BulkActionsController_streamProgress","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}},{"name":"token","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["BulkActions"]}},"/bulk-actions/{id}":{"get":{"operationId":"BulkActionsController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["BulkActions"]},"delete":{"operationId":"BulkActionsController_cancel","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["BulkActions"]}},"/bulk-actions/{id}/start":{"post":{"operationId":"BulkActionsController_start","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["BulkActions"]}},"/bulk-actions/{id}/progress":{"patch":{"operationId":"BulkActionsController_updateProgress","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateBulkActionProgressDto"}}}},"responses":{"200":{"description":""}},"tags":["BulkActions"]}},"/bulk-actions/{id}/complete":{"post":{"operationId":"BulkActionsController_complete","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["BulkActions"]}},"/bulk-actions/contacts/delete-with-tracking":{"post":{"operationId":"BulkActionsController_deleteContactsWithTracking","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BulkDeleteContactsDto"}}}},"responses":{"201":{"description":""}},"tags":["BulkActions"]}},"/bulk-actions/{id}/mark-failed":{"post":{"operationId":"BulkActionsController_markFailed","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["BulkActions"]}},"/api/tags":{"get":{"operationId":"TagsController_listTags","parameters":[],"responses":{"200":{"description":""}},"tags":["Tags"]},"post":{"operationId":"TagsController_createTag","parameters":[],"responses":{"201":{"description":""}},"tags":["Tags"]}},"/api/campaigns":{"post":{"operationId":"CampaignsController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateCampaignDto"}}}},"responses":{"201":{"description":"Campanha criada com sucesso"},"400":{"description":"Dados inválidos"},"401":{"description":"Não autenticado"},"404":{"description":"Segmento não encontrado"}},"security":[{"bearer":[]}],"summary":"Criar nova campanha","tags":["Campaigns"]},"get":{"operationId":"CampaignsController_findAll","parameters":[{"name":"page","required":false,"in":"query","schema":{"type":"number"}},{"name":"limit","required":false,"in":"query","schema":{"type":"number"}},{"name":"status","required":false,"in":"query","schema":{"type":"string"}},{"name":"search","required":false,"in":"query","schema":{"type":"string"}},{"name":"segmentId","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"Lista de campanhas retornada com sucesso"}},"security":[{"bearer":[]}],"summary":"Listar campanhas do usuário","tags":["Campaigns"]}},"/api/campaigns/{id}":{"get":{"operationId":"CampaignsController_findById","parameters":[{"name":"id","required":true,"in":"path","description":"ID da campanha","schema":{"type":"string"}}],"responses":{"200":{"description":"Campanha encontrada"},"403":{"description":"Sem permissão para acessar esta campanha"},"404":{"description":"Campanha não encontrada"}},"security":[{"bearer":[]}],"summary":"Buscar campanha por ID","tags":["Campaigns"]},"put":{"operationId":"CampaignsController_update","parameters":[{"name":"id","required":true,"in":"path","description":"ID da campanha","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateCampaignDto"}}}},"responses":{"200":{"description":"Campanha atualizada com sucesso"},"400":{"description":"Dados inválidos"},"403":{"description":"Sem permissão para editar esta campanha"},"404":{"description":"Campanha não encontrada"}},"security":[{"bearer":[]}],"summary":"Atualizar campanha","tags":["Campaigns"]},"delete":{"operationId":"CampaignsController_delete","parameters":[{"name":"id","required":true,"in":"path","description":"ID da campanha","schema":{"type":"string"}}],"responses":{"204":{"description":"Campanha deletada com sucesso"},"400":{"description":"Não é possível deletar esta campanha"},"403":{"description":"Sem permissão para deletar esta campanha"},"404":{"description":"Campanha não encontrada"}},"security":[{"bearer":[]}],"summary":"Deletar campanha","tags":["Campaigns"]}},"/api/campaigns/{id}/send":{"post":{"operationId":"CampaignsController_send","parameters":[{"name":"id","required":true,"in":"path","description":"ID da campanha","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SendCampaignDto"}}}},"responses":{"200":{"description":"Campanha enviada/agendada com sucesso"},"400":{"description":"Campanha inválida para envio"},"404":{"description":"Campanha não encontrada"}},"security":[{"bearer":[]}],"summary":"Enviar ou agendar campanha","tags":["Campaigns"]}},"/api/campaigns/{id}/cancel":{"post":{"operationId":"CampaignsController_cancel","parameters":[{"name":"id","required":true,"in":"path","description":"ID da campanha","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CancelCampaignDto"}}}},"responses":{"200":{"description":"Campanha cancelada com sucesso"},"400":{"description":"Não é possível cancelar esta campanha"},"404":{"description":"Campanha não encontrada"}},"security":[{"bearer":[]}],"summary":"Cancelar campanha agendada","tags":["Campaigns"]}},"/api/campaigns/{id}/metrics":{"get":{"operationId":"CampaignsController_getMetrics","parameters":[{"name":"id","required":true,"in":"path","description":"ID da campanha","schema":{"type":"string"}}],"responses":{"200":{"description":"Métricas da campanha"},"400":{"description":"Campanha não foi enviada"},"404":{"description":"Campanha não encontrada"}},"security":[{"bearer":[]}],"summary":"Buscar métricas da campanha","tags":["Campaigns"]}},"/api/campaign-conversations":{"post":{"operationId":"CampaignConversationsController_startConversation","parameters":[],"responses":{"201":{"description":"Conversa iniciada"}},"summary":"Iniciar nova conversa","tags":["Campaign Conversations"]},"get":{"operationId":"CampaignConversationsController_getUserConversations","parameters":[{"name":"userId","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"Lista de conversas"}},"summary":"Listar conversas do usuário","tags":["Campaign Conversations"]}},"/api/campaign-conversations/{id}/messages/simple":{"post":{"operationId":"CampaignConversationsController_addSimpleMessage","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"201":{"description":"Mensagem adicionada"}},"summary":"Adicionar mensagem simples","tags":["Campaign Conversations"]}},"/api/campaign-conversations/{id}/messages":{"post":{"operationId":"CampaignConversationsController_sendMessage","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Mensagem enviada e resposta recebida"}},"summary":"Enviar mensagem","tags":["Campaign Conversations"]}},"/api/campaign-conversations/{id}":{"get":{"operationId":"CampaignConversationsController_getConversation","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}},{"name":"userId","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"Conversa encontrada"},"404":{"description":"Conversa não encontrada"}},"summary":"Buscar conversa","tags":["Campaign Conversations"]},"delete":{"operationId":"CampaignConversationsController_deleteConversation","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}},{"name":"userId","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"204":{"description":"Conversa deletada"},"404":{"description":"Conversa não encontrada"}},"summary":"Deletar conversa","tags":["Campaign Conversations"]}},"/api/campaign-conversations/{conversationId}/files/upload":{"post":{"operationId":"FileUploadController_uploadFile","parameters":[{"name":"conversationId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"201":{"description":"Arquivo enviado e processado"}},"summary":"Upload de arquivo CSV para processamento","tags":["Campaign File Upload"]}},"/api/campaign-conversations/{conversationId}/files/{fileId}":{"get":{"operationId":"FileUploadController_getFileStatus","parameters":[{"name":"fileId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"summary":"Buscar informações e status de um arquivo","tags":["Campaign File Upload"]}},"/api/campaign-conversations/{conversationId}/files/{fileId}/import":{"post":{"operationId":"FileUploadController_importContacts","parameters":[{"name":"conversationId","required":true,"in":"path","schema":{"type":"string"}},{"name":"fileId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"201":{"description":""}},"summary":"Importar contatos do arquivo CSV","tags":["Campaign File Upload"]}},"/api/campaign-conversations/{conversationId}/files/{fileId}/mappings/{mappingId}/confirm":{"post":{"operationId":"FileUploadController_confirmMapping","parameters":[{"name":"fileId","required":true,"in":"path","schema":{"type":"string"}},{"name":"mappingId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"201":{"description":""}},"summary":"Confirmar mapeamento de campo","tags":["Campaign File Upload"]}},"/api/campaign-conversations/{conversationId}/files":{"get":{"operationId":"FileUploadController_listFiles","parameters":[{"name":"conversationId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"summary":"Listar arquivos da conversa","tags":["Campaign File Upload"]}},"/api/users":{"get":{"operationId":"UsersController_list","parameters":[],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Listar usuários","tags":["Users"]}},"/api/users/profile":{"get":{"operationId":"UsersController_getByEmail","parameters":[{"name":"email","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":""},"404":{"description":"User not found"}},"security":[{"bearer":[]}],"summary":"Obter perfil por email","tags":["Users"]},"post":{"operationId":"UsersController_upsertByEmail","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpsertUserDto"}}}},"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Criar/atualizar perfil por email (upsert)","tags":["Users"]}},"/api/users/{id}":{"get":{"operationId":"UsersController_getById","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Obter usuário por ID","tags":["Users"]},"put":{"operationId":"UsersController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateUserDto"}}}},"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Atualizar usuário por ID","tags":["Users"]}},"/api/ai-agents":{"post":{"operationId":"AIAgentsController_createAgent","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateAIAgentDto"}}}},"responses":{"201":{"description":"Agente criado com sucesso"},"400":{"description":"Dados inválidos"}},"security":[{"bearer":[]}],"summary":"Criar novo agente de IA","tags":["AI Agents"]},"get":{"operationId":"AIAgentsController_getUserAgents","parameters":[{"name":"userId","required":false,"in":"query","description":"ID do usuário (fallback para compatibilidade)","schema":{"type":"string"}},{"name":"includeInactive","required":false,"in":"query","description":"Incluir agentes inativos","schema":{"type":"boolean"}}],"responses":{"200":{"description":"Lista de agentes"}},"security":[{"bearer":[]}],"summary":"Listar agentes do usuário","tags":["AI Agents"]}},"/api/ai-agents/default":{"get":{"operationId":"AIAgentsController_getDefaultAgent","parameters":[{"name":"userId","required":true,"in":"query","description":"ID do usuário","schema":{"type":"string"}}],"responses":{"200":{"description":"Agente padrão encontrado"},"404":{"description":"Agente padrão não encontrado"}},"security":[{"bearer":[]}],"summary":"Buscar agente padrão do usuário","tags":["AI Agents"]}},"/api/ai-agents/{id}":{"get":{"operationId":"AIAgentsController_getAgentById","parameters":[{"name":"id","required":true,"in":"path","description":"ID do agente","schema":{"type":"string"}}],"responses":{"200":{"description":"Agente encontrado"},"404":{"description":"Agente não encontrado"}},"security":[{"bearer":[]}],"summary":"Buscar agente por ID","tags":["AI Agents"]},"put":{"operationId":"AIAgentsController_updateAgent","parameters":[{"name":"id","required":true,"in":"path","description":"ID do agente","schema":{"type":"string"}},{"name":"userId","required":true,"in":"query","description":"ID do usuário","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateAIAgentDto"}}}},"responses":{"200":{"description":"Agente atualizado"},"400":{"description":"Dados inválidos"},"404":{"description":"Agente não encontrado"}},"security":[{"bearer":[]}],"summary":"Atualizar agente de IA","tags":["AI Agents"]},"delete":{"operationId":"AIAgentsController_deleteAgent","parameters":[{"name":"id","required":true,"in":"path","description":"ID do agente","schema":{"type":"string"}},{"name":"userId","required":true,"in":"query","description":"ID do usuário","schema":{"type":"string"}}],"responses":{"204":{"description":"Agente deletado"},"404":{"description":"Agente não encontrado"}},"security":[{"bearer":[]}],"summary":"Deletar agente de IA","tags":["AI Agents"]}},"/api/ai-agents/{id}/set-default":{"put":{"operationId":"AIAgentsController_setDefaultAgent","parameters":[{"name":"id","required":true,"in":"path","description":"ID do agente","schema":{"type":"string"}},{"name":"userId","required":true,"in":"query","description":"ID do usuário","schema":{"type":"string"}}],"responses":{"200":{"description":"Agente definido como padrão"},"404":{"description":"Agente não encontrado"}},"security":[{"bearer":[]}],"summary":"Definir agente como padrão","tags":["AI Agents"]}},"/api/ai-agents/memory/feedback":{"post":{"operationId":"AIAgentsController_saveFeedback","parameters":[{"name":"userId","required":true,"in":"query","description":"ID do usuário","schema":{"type":"string"}}],"responses":{"201":{"description":"Feedback salvo com sucesso"},"400":{"description":"Dados inválidos"}},"security":[{"bearer":[]}],"summary":"Salvar feedback de interação com agente","tags":["AI Agents"]}},"/api/ai-agents/memory/context":{"post":{"operationId":"AIAgentsController_getMemoryContext","parameters":[{"name":"userId","required":true,"in":"query","description":"ID do usuário","schema":{"type":"string"}}],"responses":{"200":{"description":"Contexto de memória retornado"}},"security":[{"bearer":[]}],"summary":"Buscar contexto de memória do agente","tags":["AI Agents"]}},"/api/ai-agents/memory/{agentId}":{"get":{"operationId":"AIAgentsController_getMemory","parameters":[{"name":"agentId","required":true,"in":"path","description":"ID do agente","schema":{"type":"string"}},{"name":"userId","required":true,"in":"query","description":"ID do usuário","schema":{"type":"string"}}],"responses":{"200":{"description":"Memória retornada"},"404":{"description":"Memória não encontrada"}},"security":[{"bearer":[]}],"summary":"Buscar memória completa do agente","tags":["AI Agents"]},"delete":{"operationId":"AIAgentsController_clearMemory","parameters":[{"name":"agentId","required":true,"in":"path","description":"ID do agente","schema":{"type":"string"}},{"name":"userId","required":true,"in":"query","description":"ID do usuário","schema":{"type":"string"}}],"responses":{"204":{"description":"Memória limpa"}},"security":[{"bearer":[]}],"summary":"Limpar memória do agente","tags":["AI Agents"]}},"/api/ai-agents/memory":{"delete":{"operationId":"AIAgentsController_clearAllUserMemories","parameters":[{"name":"userId","required":true,"in":"query","description":"ID do usuário","schema":{"type":"string"}}],"responses":{"200":{"description":"Memórias limpas"}},"security":[{"bearer":[]}],"summary":"Limpar todas as memórias do usuário (LGPD)","tags":["AI Agents"]}},"/api/message-feedback":{"post":{"operationId":"MessageFeedbackController_createFeedback","parameters":[],"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"tags":["Message Feedback"]}},"/api/message-feedback/message/{messageId}":{"get":{"operationId":"MessageFeedbackController_getFeedbackByMessage","parameters":[{"name":"messageId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"tags":["Message Feedback"]}},"/api/message-feedback/conversation/{conversationId}":{"get":{"operationId":"MessageFeedbackController_getFeedbackByConversation","parameters":[{"name":"conversationId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"tags":["Message Feedback"]}},"/api/message-feedback/learning-insights":{"get":{"operationId":"MessageFeedbackController_getLearningInsights","parameters":[{"name":"agentId","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"tags":["Message Feedback"]}},"/api/message-feedback/{id}":{"delete":{"operationId":"MessageFeedbackController_deleteFeedback","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"tags":["Message Feedback"]}},"/billing/plans":{"get":{"operationId":"BillingController_listPlans","parameters":[],"responses":{"200":{"description":""}},"tags":["Billing"]}},"/billing/debug/email-status":{"get":{"operationId":"BillingController_debugEmailStatus","parameters":[],"responses":{"200":{"description":""}},"tags":["Billing"]}},"/billing/my-plan":{"get":{"operationId":"BillingController_getMyPlan","parameters":[],"responses":{"200":{"description":""}},"tags":["Billing"]}},"/billing/usage":{"get":{"operationId":"BillingController_getUsage","parameters":[],"responses":{"200":{"description":""}},"tags":["Billing"]}},"/billing/usage/alerts":{"get":{"operationId":"BillingController_getUsageAlerts","parameters":[],"responses":{"200":{"description":""}},"tags":["Billing"]}},"/billing/history":{"get":{"operationId":"BillingController_getSubscriptionHistory","parameters":[],"responses":{"200":{"description":""}},"tags":["Billing"]}},"/billing/invoices":{"get":{"operationId":"BillingController_getInvoices","parameters":[],"responses":{"200":{"description":""}},"tags":["Billing"]}},"/subscriptions":{"post":{"operationId":"SubscriptionController_createSubscription","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateSubscriptionDto"}}}},"responses":{"201":{"description":""}},"tags":["Subscription"]},"delete":{"operationId":"SubscriptionController_cancelSubscription","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CancelSubscriptionDto"}}}},"responses":{"200":{"description":""}},"tags":["Subscription"]}},"/subscriptions/change-plan":{"patch":{"operationId":"SubscriptionController_changePlan","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChangePlanDto"}}}},"responses":{"200":{"description":""}},"tags":["Subscription"]}},"/subscriptions/reactivate":{"post":{"operationId":"SubscriptionController_reactivateSubscription","parameters":[],"responses":{"201":{"description":""}},"tags":["Subscription"]}},"/subscriptions/checkout":{"post":{"operationId":"SubscriptionController_createCheckoutSession","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateCheckoutSessionDto"}}}},"responses":{"201":{"description":""}},"tags":["Subscription"]}},"/subscriptions/portal":{"get":{"operationId":"SubscriptionController_createBillingPortalSession","parameters":[],"responses":{"200":{"description":""}},"tags":["Subscription"]}},"/webhooks/stripe":{"post":{"operationId":"WebhookController_handleWebhook","parameters":[{"name":"stripe-signature","required":true,"in":"header","schema":{"type":"string"}}],"responses":{"201":{"description":""}},"tags":["Webhook"]}},"/billing/credits/balance":{"get":{"operationId":"CreditController_getBalance","parameters":[],"responses":{"200":{"description":""}},"tags":["Credit"]}},"/billing/credits/breakdown":{"get":{"operationId":"CreditController_getBreakdown","parameters":[],"responses":{"200":{"description":""}},"tags":["Credit"]}},"/billing/credits/status":{"get":{"operationId":"CreditController_getDegradationStatus","parameters":[],"responses":{"200":{"description":""}},"tags":["Credit"]}},"/billing/credits/transactions":{"get":{"operationId":"CreditController_getTransactions","parameters":[],"responses":{"200":{"description":""}},"tags":["Credit"]}},"/billing/credits/on-demand/enable":{"post":{"operationId":"CreditController_enableOnDemand","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EnableOnDemandDto"}}}},"responses":{"200":{"description":""}},"tags":["Credit"]}},"/billing/credits/on-demand/disable":{"post":{"operationId":"CreditController_disableOnDemand","parameters":[],"responses":{"200":{"description":""}},"tags":["Credit"]}},"/billing/credits/on-demand/limit":{"patch":{"operationId":"CreditController_updateOnDemandLimit","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateOnDemandLimitDto"}}}},"responses":{"200":{"description":""}},"tags":["Credit"]}},"/billing/credits/topup":{"post":{"operationId":"CreditController_topupCredits","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TopupCreditsDto"}}}},"responses":{"200":{"description":""}},"tags":["Credit"]}},"/billing/credits/degradation":{"patch":{"operationId":"CreditController_setDegradedMode","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SetDegradedModeDto"}}}},"responses":{"200":{"description":""}},"tags":["Credit"]}},"/billing/credits/models":{"get":{"operationId":"CreditController_getAvailableModels","parameters":[],"responses":{"200":{"description":""}},"tags":["Credit"]}},"/billing/credits/checkout":{"post":{"operationId":"CreditController_createTopupCheckout","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TopupCreditsDto"}}}},"responses":{"200":{"description":""}},"tags":["Credit"]}},"/billing/credits/payment-intent":{"post":{"operationId":"CreditController_createTopupPaymentIntent","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TopupCreditsDto"}}}},"responses":{"200":{"description":""}},"tags":["Credit"]}},"/billing/credits/packages":{"get":{"operationId":"CreditController_getTopupPackages","parameters":[],"responses":{"200":{"description":""}},"tags":["Credit"]}},"/billing/credits/warnings":{"get":{"operationId":"CreditController_getWarnings","parameters":[],"responses":{"200":{"description":""}},"tags":["Credit"]}},"/api/ai-assistant/conversations":{"post":{"operationId":"AIAssistantController_startConversation","parameters":[],"responses":{"201":{"description":"Conversa criada"},"400":{"description":"Bad Request"}},"summary":"Iniciar nova conversa com assistente","tags":["AI Assistant"]},"get":{"operationId":"AIAssistantController_getUserConversations","parameters":[{"name":"userId","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"Lista de conversas"}},"summary":"Listar conversas do usuário","tags":["AI Assistant"]}},"/api/ai-assistant/conversations/{id}/messages":{"post":{"operationId":"AIAssistantController_sendMessage","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"201":{"description":"Mensagem enviada"},"404":{"description":"Conversa não encontrada"}},"summary":"Enviar mensagem para o assistente","tags":["AI Assistant"]}},"/api/ai-assistant/conversations/{id}":{"get":{"operationId":"AIAssistantController_getConversation","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}},{"name":"userId","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"Conversa encontrada"},"404":{"description":"Conversa não encontrada"}},"summary":"Buscar conversa","tags":["AI Assistant"]},"delete":{"operationId":"AIAssistantController_deleteConversation","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}},{"name":"userId","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"204":{"description":"Conversa deletada"},"404":{"description":"Conversa não encontrada"}},"summary":"Deletar conversa","tags":["AI Assistant"]}},"/templates":{"get":{"operationId":"TemplatesController_findAll","parameters":[{"name":"search","required":true,"in":"query","schema":{"type":"string"}},{"name":"category","required":true,"in":"query","schema":{"type":"string"}},{"name":"isFavorite","required":true,"in":"query","schema":{"type":"string"}},{"name":"tags","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"tags":["Templates"]},"post":{"operationId":"TemplatesController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateTemplateDto"}}}},"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"tags":["Templates"]}},"/templates/categories":{"get":{"operationId":"TemplatesController_getCategories","parameters":[],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"tags":["Templates"]}},"/templates/tags":{"get":{"operationId":"TemplatesController_getTags","parameters":[],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"tags":["Templates"]}},"/templates/{id}":{"get":{"operationId":"TemplatesController_findById","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"tags":["Templates"]},"put":{"operationId":"TemplatesController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateTemplateDto"}}}},"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"tags":["Templates"]},"delete":{"operationId":"TemplatesController_delete","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"204":{"description":""}},"security":[{"bearer":[]}],"tags":["Templates"]}},"/templates/{id}/duplicate":{"post":{"operationId":"TemplatesController_duplicate","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"tags":["Templates"]}},"/templates/{id}/favorite":{"put":{"operationId":"TemplatesController_toggleFavorite","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"tags":["Templates"]}},"/templates/{id}/render":{"post":{"operationId":"TemplatesController_renderTemplate","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"tags":["Templates"]}},"/domains":{"post":{"operationId":"DomainsController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateDomainDto"}}}},"responses":{"201":{"description":""}},"tags":["Domains"]},"get":{"operationId":"DomainsController_findAll","parameters":[],"responses":{"200":{"description":""}},"tags":["Domains"]}},"/domains/{id}":{"get":{"operationId":"DomainsController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["Domains"]},"patch":{"operationId":"DomainsController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateDomainDto"}}}},"responses":{"200":{"description":""}},"tags":["Domains"]},"delete":{"operationId":"DomainsController_delete","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"204":{"description":""}},"tags":["Domains"]}},"/domains/{id}/verify":{"post":{"operationId":"DomainsController_verify","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["Domains"]}},"/admin/overview":{"get":{"operationId":"AdminController_getOverview","parameters":[{"name":"refresh","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["Admin"]}},"/admin/openrouter":{"get":{"operationId":"AdminController_getOpenRouterStats","parameters":[{"name":"refresh","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["Admin"]}},"/admin/resend":{"get":{"operationId":"AdminController_getResendStats","parameters":[{"name":"refresh","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["Admin"]}},"/admin/tenants":{"get":{"operationId":"AdminController_getTenantRanking","parameters":[{"name":"limit","required":true,"in":"query","schema":{"type":"string"}},{"name":"refresh","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["Admin"]}},"/admin/cache/invalidate":{"post":{"operationId":"AdminController_invalidateCache","parameters":[],"responses":{"201":{"description":""}},"tags":["Admin"]}},"/admin/alerts":{"get":{"operationId":"AdminController_getAlerts","parameters":[],"responses":{"200":{"description":""}},"tags":["Admin"]}}},"info":{"title":"Email Platform API","description":"API for sending emails using Resend","version":"1.0","contact":{}},"tags":[],"servers":[],"components":{"securitySchemes":{"bearer":{"scheme":"bearer","bearerFormat":"JWT","type":"http"}},"schemas":{"AttachmentDto":{"type":"object","properties":{"filename":{"type":"string","description":"Attachment filename"},"content":{"type":"object","description":"Attachment content (base64 or buffer)"},"contentType":{"type":"string","description":"Content type"}},"required":["filename","content"]},"SendEmailDto":{"type":"object","properties":{"from":{"type":"string","description":"Sender email address","example":"onboarding@resend.dev"},"to":{"description":"Recipient email address","example":"user@example.com","oneOf":[{"type":"string"},{"type":"array","items":{"type":"string"}},{"type":"object"},{"type":"array","items":{"type":"object"}}]},"cc":{"description":"CC recipients","oneOf":[{"type":"string"},{"type":"array","items":{"type":"string"}},{"type":"object"},{"type":"array","items":{"type":"object"}}]},"bcc":{"description":"BCC recipients","oneOf":[{"type":"string"},{"type":"array","items":{"type":"string"}},{"type":"object"},{"type":"array","items":{"type":"object"}}]},"subject":{"type":"string","description":"Email subject","example":"Welcome to our platform!"},"html":{"type":"string","description":"HTML content of the email"},"text":{"type":"string","description":"Plain text content of the email"},"react":{"type":"object","description":"React component for email template"},"template":{"type":"string","description":"Email template to use","enum":["welcome","reset-password","invoice","notification","custom"]},"templateData":{"type":"object","description":"Template variables"},"replyTo":{"type":"string","description":"Reply-to email address"},"attachments":{"description":"Email attachments","type":"array","items":{"$ref":"#/components/schemas/AttachmentDto"}},"headers":{"type":"object","description":"Custom headers"},"tags":{"description":"Tags for email tracking","type":"array","items":{"type":"string"}}},"required":["from","to","subject"]},"EmailResponseDto":{"type":"object","properties":{"id":{"type":"string","description":"Unique email ID","example":"e3b0c442-98fc-1c14-b39f-92d1282048c4"},"resendId":{"type":"string","description":"Resend email ID","example":"6a5d4e3c-2b1a-0987-6543-fedcba987654"},"from":{"type":"string","description":"Sender email address","example":"onboarding@resend.dev"},"to":{"description":"Recipient email addresses","example":["user@example.com"],"type":"array","items":{"type":"string"}},"cc":{"description":"CC recipients","example":[],"type":"array","items":{"type":"string"}},"bcc":{"description":"BCC recipients","example":[],"type":"array","items":{"type":"string"}},"subject":{"type":"string","description":"Email subject","example":"Welcome to our platform!"},"htmlPreview":{"type":"string","description":"HTML content preview"},"textPreview":{"type":"string","description":"Text content preview"},"status":{"type":"string","description":"Email status","enum":["pending","sent","delivered","failed","bounced","complained"],"example":"sent"},"template":{"type":"string","description":"Template used"},"attachmentsCount":{"type":"number","description":"Number of attachments","example":0},"tags":{"description":"Email tags","example":["welcome","onboarding"],"type":"array","items":{"type":"string"}},"error":{"type":"string","description":"Error message if failed"},"deliveredAt":{"format":"date-time","type":"string","description":"When the email was delivered"},"openedAt":{"format":"date-time","type":"string","description":"When the email was opened"},"openCount":{"type":"number","description":"Number of times the email was opened","example":0},"clickedAt":{"format":"date-time","type":"string","description":"When a link was clicked"},"clickCount":{"type":"number","description":"Number of link clicks","example":0},"bouncedAt":{"format":"date-time","type":"string","description":"When the email bounced"},"complainedAt":{"format":"date-time","type":"string","description":"When a complaint was received"},"createdAt":{"format":"date-time","type":"string","description":"Creation timestamp"},"updatedAt":{"format":"date-time","type":"string","description":"Last update timestamp"}},"required":["id","resendId","from","to","subject","status","createdAt","updatedAt"]},"SendBatchEmailDto":{"type":"object","properties":{"emails":{"description":"Array of emails to send in batch","minItems":1,"maxItems":100,"type":"array","items":{"$ref":"#/components/schemas/SendEmailDto"}}},"required":["emails"]},"SendEmailToSegmentDto":{"type":"object","properties":{"from":{"type":"string","description":"Sender email address","example":"onboarding@resend.dev"},"segmentId":{"type":"string","description":"Segment ID to send email to","example":"89db9f18-eca1-4b83-872f-53867eb0aea6"},"subject":{"type":"string","description":"Email subject","example":"Welcome to our platform!"},"html":{"type":"string","description":"HTML content of the email"},"text":{"type":"string","description":"Plain text content of the email"},"tags":{"description":"Email tags","type":"array","items":{"type":"string"}}},"required":["from","segmentId","subject"]},"UploadContactsResponseDto":{"type":"object","properties":{"totalRows":{"type":"number"},"imported":{"type":"number"},"duplicates":{"type":"number"},"invalid":{"type":"number"},"messages":{"description":"Additional messages","type":"array","items":{"type":"string"}}},"required":["totalRows","imported","duplicates","invalid"]},"CreateContactDto":{"type":"object","properties":{"email":{"type":"string","example":"john.doe@example.com"},"name":{"type":"string","example":"John Doe"},"tags":{"description":"Tags associated with the contact","example":["leads","newsletter"],"type":"array","items":{"type":"string"}},"meta":{"type":"object","description":"Extra fields (stored as JSON)"}},"required":["email"]},"CsvPreviewResponseDto":{"type":"object","properties":{"columns":{"description":"Column names found in CSV","type":"array","items":{"type":"string"}},"sampleRow":{"type":"object","description":"Sample data from first row"},"totalRows":{"type":"number","description":"Total rows in CSV"}},"required":["columns","sampleRow","totalRows"]},"BulkDeleteContactsDto":{"type":"object","properties":{"ids":{"description":"Array of contact IDs to delete","type":"array","items":{"type":"string"}}},"required":["ids"]},"BulkDeleteContactsResponseDto":{"type":"object","properties":{"deleted":{"type":"number","description":"Number of contacts deleted"}},"required":["deleted"]},"BulkAddTagsDto":{"type":"object","properties":{"ids":{"description":"Array of contact IDs","type":"array","items":{"type":"string"}},"tags":{"description":"Tags to add to contacts","example":["vip","newsletter"],"type":"array","items":{"type":"string"}}},"required":["ids","tags"]},"BulkAddTagsResponseDto":{"type":"object","properties":{"updated":{"type":"number","description":"Number of contacts updated"}},"required":["updated"]},"LoginCredentialsDto":{"type":"object","properties":{"email":{"type":"string","example":"user@example.com","description":"Email do usuário"},"password":{"type":"string","example":"password123","description":"Senha do usuário (mínimo 6 caracteres)","minLength":6}},"required":["email","password"]},"RegisterUserDto":{"type":"object","properties":{"email":{"type":"string","example":"user@example.com","description":"Email do usuário"},"password":{"type":"string","example":"Password123","description":"Senha forte (mínimo 8 caracteres, 1 maiúscula, 1 minúscula, 1 número)","minLength":8},"name":{"type":"string","example":"João Silva","description":"Nome completo do usuário"},"phone":{"type":"string","example":"+5511999999999","description":"Telefone do usuário"}},"required":["email","password"]},"RefreshTokenDto":{"type":"object","properties":{"token":{"type":"string","example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...","description":"Refresh token JWT"}},"required":["token"]},"ChangePasswordDto":{"type":"object","properties":{"oldPassword":{"type":"string","example":"CurrentPassword123","description":"Senha atual do usuário"},"newPassword":{"type":"string","example":"NewPassword123","description":"Nova senha forte (mínimo 8 caracteres, 1 maiúscula, 1 minúscula, 1 número)","minLength":8}},"required":["oldPassword","newPassword"]},"SegmentRulesDto":{"type":"object","properties":{"tags":{"description":"Tags to filter contacts","type":"array","items":{"type":"string"}},"meta":{"type":"object","description":"Custom fields to filter"}}},"CreateSegmentDto":{"type":"object","properties":{"name":{"type":"string","description":"Segment name"},"rules":{"description":"Segment rules","allOf":[{"$ref":"#/components/schemas/SegmentRulesDto"}]}},"required":["name","rules"]},"UpdateSegmentDto":{"type":"object","properties":{"name":{"type":"string","description":"Segment name"},"rules":{"description":"Segment rules","allOf":[{"$ref":"#/components/schemas/SegmentRulesDto"}]}}},"AddContactsToSegmentDto":{"type":"object","properties":{"contactIds":{"description":"Contact IDs to add","type":"array","items":{"type":"string"}}},"required":["contactIds"]},"AutomationNodeDto":{"type":"object","properties":{"id":{"type":"string","description":"Unique node ID"},"type":{"type":"string","description":"Node type","enum":["trigger","action","condition","delay","split"]},"data":{"type":"object","description":"Node data"},"position":{"type":"object","description":"Node position on canvas"}},"required":["id","type","data","position"]},"AutomationEdgeDto":{"type":"object","properties":{"id":{"type":"string","description":"Unique edge ID"},"source":{"type":"string","description":"Source node ID"},"target":{"type":"string","description":"Target node ID"},"condition":{"type":"string","description":"Edge condition (true/false)"}},"required":["id","source","target"]},"AutomationFlowDto":{"type":"object","properties":{"nodes":{"description":"Flow nodes","type":"array","items":{"$ref":"#/components/schemas/AutomationNodeDto"}},"edges":{"description":"Connections between nodes","type":"array","items":{"$ref":"#/components/schemas/AutomationEdgeDto"}}},"required":["nodes","edges"]},"CreateAutomationDto":{"type":"object","properties":{"user_id":{"type":"string","description":"User ID who owns the automation"},"name":{"type":"string","description":"Automation name"},"flow":{"description":"Automation flow","allOf":[{"$ref":"#/components/schemas/AutomationFlowDto"}]},"trigger_type":{"type":"string","description":"Trigger type","enum":["contact_added","tag_added","tag_removed","email_events","form_submitted","date_specific","webhook"]},"trigger_config":{"type":"object","description":"Trigger configuration"}},"required":["user_id","name","flow","trigger_type"]},"UpdateAutomationDto":{"type":"object","properties":{"name":{"type":"string","description":"Automation name"},"flow":{"description":"Automation flow","allOf":[{"$ref":"#/components/schemas/AutomationFlowDto"}]},"status":{"type":"string","description":"Automation status","enum":["draft","active","paused","archived"]},"trigger_type":{"type":"string","description":"Trigger type","enum":["contact_added","tag_added","tag_removed","email_events","form_submitted","date_specific","webhook"]},"trigger_config":{"type":"object","description":"Trigger configuration"},"triggers":{"description":"Multiple triggers (novo sistema)","type":"array","items":{"type":"string"}}}},"CreateBulkActionDto":{"type":"object","properties":{}},"UpdateBulkActionProgressDto":{"type":"object","properties":{}},"CreateCampaignDto":{"type":"object","properties":{"name":{"type":"string","example":"Black Friday 2025","description":"Nome da campanha"},"segmentIds":{"example":["550e8400-e29b-41d4-a716-446655440000","660e9500-f39c-52e5-b827-557766551111"],"description":"IDs dos segmentos de contatos para envio","type":"array","items":{"type":"string"}},"fromEmail":{"type":"string","example":"Marketing Team <marketing@bravy.com.br>","description":"Email do remetente (pode incluir nome)"},"subject":{"type":"string","example":"🔥 Descontos imperdíveis: até 70% OFF!","description":"Assunto do email"},"htmlContent":{"type":"string","example":"<h1>Black Friday</h1><p>Aproveite!</p>","description":"Conteúdo HTML do email"},"textContent":{"type":"string","example":"Black Friday - Aproveite os descontos!","description":"Conteúdo texto puro do email"},"tags":{"example":["black-friday","promocao","2025"],"description":"Tags para categorização da campanha","type":"array","items":{"type":"string"}},"batchSize":{"type":"number","example":100,"description":"Tamanho do lote para envio (máx 100)","default":100},"status":{"type":"string","example":"draft","description":"Status inicial da campanha","enum":["draft","scheduled"]},"scheduledAt":{"type":"string","example":"2025-11-29T10:00:00Z","description":"Data/hora para agendamento (ISO 8601)"},"resendBroadcastId":{"type":"string","example":"550e8400-e29b-41d4-a716-446655440000","description":"ID da campanha original (quando for um reenvio)"}},"required":["name","fromEmail"]},"UpdateCampaignDto":{"type":"object","properties":{"name":{"type":"string","example":"Black Friday 2025 - Atualizado","description":"Nome da campanha"},"segmentIds":{"example":["550e8400-e29b-41d4-a716-446655440000","660e9500-f39c-52e5-b827-557766551111"],"description":"IDs dos segmentos de contatos para envio","type":"array","items":{"type":"string"}},"fromEmail":{"type":"string","example":"Marketing Team <marketing@bravy.com.br>","description":"Email do remetente (pode incluir nome)"},"subject":{"type":"string","example":"🔥 ÚLTIMA CHANCE: até 70% OFF!","description":"Assunto do email"},"htmlContent":{"type":"string","example":"<h1>Última Chance!</h1><p>Aproveite agora!</p>","description":"Conteúdo HTML do email"},"textContent":{"type":"string","example":"Última Chance! - Aproveite os descontos!","description":"Conteúdo texto puro do email"},"tags":{"example":["black-friday","urgencia","2025"],"description":"Tags para categorização da campanha","type":"array","items":{"type":"string"}},"batchSize":{"type":"number","example":50,"description":"Tamanho do lote para envio (máx 100)"},"status":{"type":"string","example":"draft","description":"Status da campanha","enum":["draft","scheduled","cancelled"]},"scheduledAt":{"type":"string","example":"2025-11-29T12:00:00Z","description":"Data/hora para agendamento (ISO 8601)"}}},"SendCampaignDto":{"type":"object","properties":{"scheduledAt":{"type":"string","example":"2025-11-29T10:00:00Z","description":"Data/hora para agendamento do envio (ISO 8601). Se não fornecido, envia imediatamente."}}},"CancelCampaignDto":{"type":"object","properties":{"reason":{"type":"string","example":"Cliente solicitou cancelamento","description":"Motivo do cancelamento (opcional)"}}},"UpsertUserDto":{"type":"object","properties":{"name":{"type":"string","example":"João Paulo"},"email":{"type":"string","example":"jp@marketing.bravy.com.br"},"phone":{"type":"string","example":"+55 11 99999-9999"},"avatar_url":{"type":"string","example":"https://example.com/avatar.png"},"signature":{"type":"string","description":"Assinatura de e-mail em HTML ou texto","example":"<p>Atenciosamente,<br/>João Paulo</p>"}},"required":["name","email"]},"UpdateUserDto":{"type":"object","properties":{"name":{"type":"string"},"phone":{"type":"string"},"avatar_url":{"type":"string"},"signature":{"type":"string"}}},"CreateAIAgentDto":{"type":"object","properties":{"userId":{"type":"string","description":"ID do usuário proprietário do agente"},"name":{"type":"string","description":"Nome do agente","example":"Assistente de Vendas"},"description":{"type":"string","description":"Descrição do agente","example":"Especialista em criar emails de vendas persuasivos"},"systemPrompt":{"type":"string","description":"Prompt do sistema que define o comportamento do agente"},"model":{"type":"string","description":"Modelo de IA a ser usado","example":"gpt-4","default":"gpt-4"},"temperature":{"type":"number","description":"Temperatura do modelo (0-1)","minimum":0,"maximum":1,"default":0.7},"maxTokens":{"type":"number","description":"Número máximo de tokens","default":2000},"isActive":{"type":"boolean","description":"Se o agente está ativo","default":true},"isDefault":{"type":"boolean","description":"Se é o agente padrão do usuário","default":false},"hasExtensiveMemory":{"type":"boolean","description":"Se o agente possui memória extensiva ativada","default":false}},"required":["userId","name","systemPrompt"]},"UpdateAIAgentDto":{"type":"object","properties":{"name":{"type":"string","description":"Nome do agente"},"description":{"type":"string","description":"Descrição do agente"},"systemPrompt":{"type":"string","description":"Prompt do sistema"},"model":{"type":"string","description":"Modelo de IA a ser usado"},"temperature":{"type":"number","description":"Temperatura do modelo (0-1)","minimum":0,"maximum":1},"maxTokens":{"type":"number","description":"Número máximo de tokens"},"isActive":{"type":"boolean","description":"Se o agente está ativo"},"isDefault":{"type":"boolean","description":"Se é o agente padrão do usuário"},"hasExtensiveMemory":{"type":"boolean","description":"Se o agente possui memória extensiva ativada"}}},"CreateSubscriptionDto":{"type":"object","properties":{}},"ChangePlanDto":{"type":"object","properties":{}},"CancelSubscriptionDto":{"type":"object","properties":{}},"CreateCheckoutSessionDto":{"type":"object","properties":{}},"EnableOnDemandDto":{"type":"object","properties":{}},"UpdateOnDemandLimitDto":{"type":"object","properties":{}},"TopupCreditsDto":{"type":"object","properties":{}},"SetDegradedModeDto":{"type":"object","properties":{}},"CreateTemplateDto":{"type":"object","properties":{}},"UpdateTemplateDto":{"type":"object","properties":{}},"CreateDomainDto":{"type":"object","properties":{}},"UpdateDomainDto":{"type":"object","properties":{}}}}}